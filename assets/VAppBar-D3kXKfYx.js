import{m as A,a as V}from"./VToolbar-BLQyC3ct.js";import{p as I,r as P,R as f,c as o,aO as E,af as y,a3 as L,ag as k,N as x,h as M,ap as U,ai as j,T as z,y as w,i as C,d as F,j as O,aj as q}from"./index-Bmq1rx2x.js";import{u as W}from"./ssrBoot-D6JNUIId.js";const Y=I({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function D(e){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:v}=b;let d=0,s=0;const l=P(null),u=f(0),r=f(0),m=f(0),p=f(!1),n=f(!1),c=o(()=>Number(e.scrollThreshold)),H=o(()=>E((c.value-u.value)/c.value||0)),h=()=>{const t=l.value;if(!t||v&&!v.value)return;d=u.value,u.value="window"in t?t.pageYOffset:t.scrollTop;const i=t instanceof Window?document.documentElement.scrollHeight:t.scrollHeight;if(s!==i){s=i;return}n.value=u.value<d,m.value=Math.abs(u.value-c.value)};return y(n,()=>{r.value=r.value||u.value}),y(p,()=>{r.value=0}),L(()=>{y(()=>e.scrollTarget,t=>{var S;const i=t?document.querySelector(t):window;i&&i!==l.value&&((S=l.value)==null||S.removeEventListener("scroll",h),l.value=i,l.value.addEventListener("scroll",h,{passive:!0}))},{immediate:!0})}),k(()=>{var t;(t=l.value)==null||t.removeEventListener("scroll",h)}),v&&y(v,h,{immediate:!0}),{scrollThreshold:c,currentScroll:u,currentThreshold:m,isScrollActive:p,scrollRatio:H,isScrollingUp:n,savedScroll:r}}const G=I({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...A(),...x(),...Y(),height:{type:[Number,String],default:64}},"VAppBar"),X=M()({name:"VAppBar",props:G(),emits:{"update:modelValue":e=>!0},setup(e,b){let{slots:v}=b;const d=P(),s=U(e,"modelValue"),l=o(()=>{var g;const a=new Set(((g=e.scrollBehavior)==null?void 0:g.split(" "))??[]);return{hide:a.has("hide"),fullyHide:a.has("fully-hide"),inverted:a.has("inverted"),collapse:a.has("collapse"),elevate:a.has("elevate"),fadeImage:a.has("fade-image")}}),u=o(()=>{const a=l.value;return a.hide||a.fullyHide||a.inverted||a.collapse||a.elevate||a.fadeImage||!s.value}),{currentScroll:r,scrollThreshold:m,isScrollingUp:p,scrollRatio:n}=D(e,{canScroll:u}),c=o(()=>l.value.hide||l.value.fullyHide),H=o(()=>e.collapse||l.value.collapse&&(l.value.inverted?n.value>0:n.value===0)),h=o(()=>e.flat||l.value.fullyHide&&!s.value||l.value.elevate&&(l.value.inverted?r.value>0:r.value===0)),t=o(()=>l.value.fadeImage?l.value.inverted?1-n.value:n.value:void 0),i=o(()=>{var T,B;const a=Number(((T=d.value)==null?void 0:T.contentHeight)??e.height),g=Number(((B=d.value)==null?void 0:B.extensionHeight)??0);return c.value?r.value<m.value||l.value.fullyHide?a+g:a:a+g});j(o(()=>!!e.scrollBehavior),()=>{q(()=>{c.value?l.value.inverted?s.value=r.value>m.value:s.value=p.value||r.value<m.value:s.value=!0})});const{ssrBootStyles:S}=W(),{layoutItemStyles:R,layoutIsReady:N}=z({id:e.name,order:o(()=>parseInt(e.order,10)),position:w(e,"location"),layoutSize:i,elementSize:f(void 0),active:s,absolute:w(e,"absolute")});return C(()=>{const a=V.filterProps(e);return F(V,O({ref:d,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...R.value,"--v-toolbar-image-opacity":t.value,height:void 0,...S.value},e.style]},a,{collapse:H.value,flat:h.value}),v)}),N}});export{X as V};
